<!DOCTYPE html>
<html>
<head>
<title>Справка по JS85EMU</title>
<meta charset="UTF-8">
<style>
    body {text-align: center;}

    .menulink {
        padding-left: 10px;
        padding-right: 10px;
        font-weight: bold;
    }
</style>
</head>
<body>

<h1>Справка по JS85EMU</h1>

<h3><a href="debug.html">English</a></h3>

<hr>
<h3 style="margin-top: 5px;margin-bottom: 5px;">Меню</h3>
<a class="menulink" href="help_ru.html">Главная страница</a>
<a class="menulink" href="interface_ru.html">Интерфейс эмулятора</a><br>
<a class="menulink" href="panel_ru.html">Работа с панелью опций</a>
<span class="menulink">Работа с Дебаггером</span>
<a class="menulink" href="chr96_ru.html">Работа с утилитой CHR96</a><br>
<a class="menulink" href="conv_ru.html">Работа с конвертерами BASIC данных</a><br>
<a class="menulink" href="faq_ru.html">Часто задаваемые вопросы (FAQ)</a>
<hr>

<h3>Утилита "Дебаггер"</h3>

<img src="dbgr.png" alt="debugger"><br>

<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;В эмуляторе присутствует <b>простой дебаггер</b>, ориентированный на работу с процессорами <b>PDP-11</b>.
    Для <b>простого пользователя</b> он, конечно, не несет особой пользы, но может быть полезен <b>продвинутым людям</b>, понимающим
    внутреннее устройство системы.<br><br>
    &nbsp;&nbsp;&nbsp;&nbsp;Дебаггер состоит из <b>четырех</b> секций:<br>
</p><br>

<h4>Секция "Дизассемблер"</h4>

<img src="disasm.png" alt="disasm"><br>

<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;<b>Секция дизассемблера</b> служит для просмотра <b>дизассемблированного кода</b> ПЗУ или ОЗУ.
    Используемый здесь <b>лайт-дизассемблер</b> достаточно простой и является лишь <b>вспомогательным</b> средством.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;В режиме <b>нормального исполнения</b> элементы управления дизассемблером <b>заблокированы</b>, а показ
    дизассемблированных инструкций ведется от <b>текущей</b> (по адресу в <b>R7/PC</b>) инструкции. Для удобства ориентации
    <b>текущая инструкция</b> всегда выделена <b>белым цветом</b>. В режиме <b>паузы</b> становится возможно <b>перемещение</b> по списку дизассемблера.
    Можно <b>пролистывать</b> операции <b>по одной</b> или <b>целыми страницами</b> (по <b>10</b> операций), а также осуществлять <b>переход</b> на
    указанный в поле <b>адрес</b>. Знаки <b>########</b> вместо операции означают, что <b>по данному адресу</b> не находится <b>ни ОЗУ</b>, <b>ни ПЗУ</b> (пустая область).<br>
    &nbsp;&nbsp;&nbsp;&nbsp;В случае необходимости возможно <b>заменить</b> одну операцию другой, используя <b>лайт-ассемблер</b>.
    Для этого необходимо ввести в <b>поле адреса</b> непосредственно адрес <b>заменяемой операции</b>, можно также выбрать его <b>кнопками перемещения</b>
    или <b>кликом мышью</b> по операции в списке дизассемблера (в поле ввода новой операции <b>автоматически</b> перенесется текущая операция).
    Затем в поле <b>новой операции</b> ввести ее (либо перенести из дизассемблера кнопкой <b>"Read"</b> и произвести модификацию) и нажать
    кнопку <b>"Set"</b> для осуществления замены. Если в ассемблерном коде операции допущена <b>ошибка</b> и лайт-ассемблер <b>не смог</b> произвести кодирование
    в машинный код, будет выдано <b>уведомление</b> с причиной возникшей <b>ошибки</b>. Если <b>изменениям</b> подверглась область <b>ПЗУ</b>, то после <b>перезагрузки</b>
    страницы с эмулятором изменения будут <b>утрачены</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Дизассемблер может отображать данные (адреса и значения) в <b>шестнадцатеричной</b> или <b>восьмеричной</b> системе.
    При этом для <b>перехода</b> на адрес он должен указываться в соответствии с <b>выбранной</b> на данной момент системой, то же касается <b>значений</b>
    в <b>ассемблерном</b> формате операций.<br><br>
    &nbsp;&nbsp;&nbsp;&nbsp;<b>ВНИМАНИЕ:</b> в связи с <b>конструктивной простотой</b> лайт-дизассемблера, для определения адреса предыдущей операции
    (при навигации <b>назад</b> на одну операцию или страницу) применяется <b>простейший предсказатель</b>, определяющий размер (от <b>1</b> до <b>3</b> слов) предыдущей операции.
    В связи с этим предсказатель иногда может вычислить <b>ошибочный адрес</b> операции. Поэтому рекомендуется прокручивать дизассемблерный список сразу на <b>2-4</b> операции
    назад, дабы <b>исключить</b> неверный рассчет.<br>
</p><br>

<h4>Секция "Регистры"</h4>

<img src="regs.png" alt="regs"><br>

<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;Секция, как ясно из названия, отображает <b>содержимое регистров</b> процессора типа <b>PDP-11</b> и специальных регистров, предусмотренных
    конкретным процессором <a href="http://mk.bs0dd.net/piotr433/manuals/ka1013vm1.pdf" target="_blank"><b>КА1013ВМ1</b></a> (<b>Т36ВМ1-2</b>).
    Можно переключать отображение значений регистров в <b>шестнадцатеричной</b> или <b>восьмеричной</b> системе.
    Выбранная система также влияет на поле установки <b>точки останова</b> и поле изменения <b>значения регистра</b> в секции <b>"Управление"</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Для регистра <b>PSW</b> (слово состояния), помимо числового значения, также отображаются установленные в нем <b>флаги</b>.
    Специальные регистры <b>CPUCTRL</b> (регистр состояния и конфигурации процессора), <b>PP</b> (параллельный порт) и <b>KEYB</b> (порт клавиатуры) для удобства имеют <b>битовое
    отображение</b> текущего состояния (знаком <b>#</b> обозначены неиспользуемые биты в регистре).
    Знаки <b>x</b> вместо цифр в регистре <b>PP</b> обозначают, что, согласно конфигурации в регистре <b>CPUCTRL</b>, данная <b>группа битов</b> параллельного порта находится в режиме
    <b>входа</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Если во время <b>паузы</b> кликнуть по <b>одному из регистров</b>, он автоматически <b>выберется</b> для редактирования в секции <b>"Управление"</b>.
</p><br>

<h4>Секция "Управление"</h4>

<img src="execc.png" alt="execc"><br>

<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;Данная секция управляет <b>работой эмулятора</b> и состоит из <b>четырех</b> небольших подсекций.
    Подсекция <b>контроля исполнения</b> содержит кнопки для <b>паузы</b> и <b>перезапуска</b> эмулятора (продублированы с <b>панели опций</b>), а также кнопку <b>закрытия</b> Дебаггера.
    Подсекция <b>пошагового исполнения</b> становится доступна при установке эмулятора <b>на паузу</b> и позволяет выполнять программу <b>пошагово</b>, исполняя за раз
    <b>один</b> (кнопка <b>"Single"</b>)
    или <b>более</b> шагов (поле ввода <b>количества шагов</b> и кнопка <b>"Execute"</b>). Подсекция <b>точки останова</b> позволяет задать (эмулятор должен быть в режиме <b>паузы</b>)
    или <b>очистить</b> уже заданную <b>точку останова</b>. При достижении <b>адреса</b>, указаного в поле точки останова, эмулятор автоматически перейдет в режим <b>паузы</b>,
    после чего пользователь
    сможет <b>взаимодействовать</b> с Дебаггером для дальнейшей отладки. Тип <b>числовой системы</b>, в которой должен вводиться <b>адрес</b>,
    зависит от установленного типа в секции <b>"Регистры"</b>.
    Подсекция изменения <b>значения регистра</b> позволяет, выбрав нужный регистр из <b>списка</b> (в поле ввода отобразится его <b>текущее значение</b>),
    <b>изменить</b> его значение и записать его кнопкой
    <b>"Change"</b>. Значение регистра <b>KEYB</b> не может быть изменено, поскольку <b>порт клавиатуры</b> работает только в качестве <b>входа</b> и состояние регистра зависит
    от <b>нажатой</b> в данный момент клавиши.
    Тип <b>числовой системы</b> также зависит от секции <b>"Регистры"</b>.
</p><br>

<h4>Секция "Редактор ОЗУ"</h4>

<img src="ramed.png" alt="ramed"><br>

<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;Секция позволяет <b>просматривать</b> и <b>редактировать</b> содержимое <b>ОЗУ</b> в реальном времени (не останавливая работу эмулятора).
    На одной странице отображается <b>10</b> линий, по <b>16</b> байт каждая. Сначала байты показываются в виде <b>числовых значений</b>
    (согласно заданной <b>шестнадцатеричной</b> или <b>восьмеричной</b> системе),
    затем эти же байты показываются в виде <b>ASCII</b> символов. При необходимости, вместо режима <b>"байты"</b> можно использовать режим <b>"слова"</b>, в котором байты объединяются
    в <b>процессорные слова</b> (с порядком <b>от младшего к старшему</b>, т.е. <b>AA 01 => 01AA</b> или в восьмеричном <b>252 001 => 000652</b>).
    В таком случае <b>адрес</b> ячейки всегда должен быть <b>четным</b>.
    Символы <b>#</b> вместо <b>числовых значений</b> ячеек означают, что <b>данный адрес</b> находится за пределами <b>ОЗУ</b> (пустая область).<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Навигацию по ОЗУ можно осуществлять со сдвигом <b>влево/вправо</b>, <b>вверх/вниз</b> и с <b>постраничным</b> сдвигом (по <b>160</b> ячеек) вверх/вниз.
    Также можно переместиться на указанный в <b>поле ввода</b> адрес. Числовая система для всех полей ввода <b>соответствует</b> выбранной для отображения ячеек системе.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Для редактирования <b>значения </b>ячейки (<b>байта</b> или <b>слова</b>) следует ввести в соответствующее поле <b>адрес</b> необходимой ячейки
    (по умолчанию устанавливается адрес <b>первой ячейки</b> на странице) и в соседнее поле ввести необходимое <b>значение</b>
    (по умолчанию также устанавливается значение <b>первой ячейки</b> на странице).
    При необходимости можно <b>считать</b> актуальное значение ячейки (<b>адрес</b> которой указывается в поле), используя кнопку <b>"Read"</b>.
    <b>Запись</b> значения, соответственно, осуществляется кнопкой <b>"Change"</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;При <b>клике</b> на ячейку (в <b>числовом</b> или <b>ASCII</b> формате) можно произвести ее <b>быстрое редактирование</b>. В поле <b>адреса</b> (редактируемой ячейки)
    появится адрес выбранной <b>кликом</b> ячейки, в поле <b>значения</b> появится, непосредственно, <b>актуальное</b> значение ячейки, которое также будет автоматически <b>выделено</b>.
    Достаточно лишь <b>ввести</b> новое значение и нажать кнопку <b>"Change"</b>.
</p>

<hr>
<h3 style="margin-top: 5px;margin-bottom: 5px;">Меню</h3>
<a class="menulink" href="help_ru.html">Главная страница</a>
<a class="menulink" href="interface_ru.html">Интерфейс эмулятора</a><br>
<a class="menulink" href="panel_ru.html">Работа с панелью опций</a>
<span class="menulink">Работа с Дебаггером</span>
<a class="menulink" href="chr96_ru.html">Работа с утилитой CHR96</a><br>
<a class="menulink" href="conv_ru.html">Работа с конвертерами BASIC данных</a><br>
<a class="menulink" href="faq_ru.html">Часто задаваемые вопросы (FAQ)</a>
<hr>

</body>
</html> 
