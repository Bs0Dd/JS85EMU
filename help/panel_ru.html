<!DOCTYPE html>
<html>
<head>
<title>Справка по JS85EMU</title>
<meta charset="UTF-8">
<style>
    body {text-align: center;}

    .menulink {
        padding-left: 10px;
        padding-right: 10px;
        font-weight: bold;
    }
</style>
</head>
<body>

<h1>Справка по JS85EMU</h1>

<h3><a href="panel.html">English</a></h3>

<hr>
<h3 style="margin-top: 5px;margin-bottom: 5px;">Меню</h3>
<a class="menulink" href="help_ru.html">Главная страница</a>
<a class="menulink" href="interface_ru.html">Интерфейс эмулятора</a><br>
<span class="menulink">Работа с панелью опций</span>
<a class="menulink" href="debug_ru.html">Работа с Дебаггером</a>
<a class="menulink" href="chr96_ru.html">Работа с утилитой CHR96</a><br>
<a class="menulink" href="conv_ru.html">Работа с конвертерами BASIC данных</a><br>
<a class="menulink" href="faq_ru.html">Часто задаваемые вопросы (FAQ)</a>
<hr>

<h3>Панель опций</h3>

<img src="panel.png" alt="panel"><br>

<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;<b>Панель опций</b> является инструментом для <b>настройки</b> и <b>управления</b> эмулятором, позволяя модифицировать <b>базовые параметры</b>,
    влияющие на поведение <b>виртуального микрокомпьютера</b>.<br><br>
    &nbsp;&nbsp;&nbsp;&nbsp;Панель состоит из <b>6 секций</b> со сгруппированными по <b>общему признаку</b> параметрами.
</p><br>

<h4>Информационная секция</h4>

<img src="p1.png" alt="p1"><br>
 
<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;Небольшая секция, которая выводит <b>сведения</b> о состоянии <b>памяти</b> в микрокомпьютере.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;В первую очередь выводится количество <b>свободной памяти</b> для <b>BASIC</b> программ. Это очень актуально при использовании
    виртуального микрокомпьютера с <b>ОЗУ</b>, превышающей объем <b>10КБ</b>, когда количество свободной памяти превышает <b>9999 байт</b> и прошивка <b>не в состоянии</b>
    отобразить ее реальное количество, показывая на семисегментных индикаторах <b>искаженные</b> цифры.
</p>

<img src="invfr.png" alt="invfr"><br>
<i>число <b>23749</b> на индикаторе</i>

    <p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;Для <b>информативности</b> также присутствует индикация количества <b>выделенных переменных</b> (по умолчанию <b>26</b>) и занимаемый ими <b>размер</b>.<br><br>
    &nbsp;&nbsp;&nbsp;&nbsp;<b>Рассчет</b> информации происходит путем <b>непосредственного обращения</b> к определенным областям <b>ОЗУ</b>
    и вычисления <b>итоговых чисел</b> согласно <b>оригинальным алгоритмам</b>.
</p><br>

<h4>Секция управления</h4>

<img src="p2.png" alt="p2"><br>
 
<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;Секция служит для <b>управления</b> работой эмулятора и переключения <b>общих функций</b>. Кнопки <b>"Pause"</b> и <b>"Restart"</b>,
    как следует из названия, служат для <b>приостановки</b> и <b>перезапуска </b>эмулятора. Параметр <b>"EXT overlay"</b> переключает <b>отображение символов</b>,
    которые в реальности вынесены на <b>отдельную накладку</b> (символы, набираемые в <b>расширенном</b> (<b>EXT</b>) режимберет фикс и ажатым модификатором <b>S</b>).
    Параметр <b>"Vibro (keys)"</b> включает или выключает <b>вибрацию устройства</b> (если таковое <b>способно</b> вибрировать, что, как правило, касается <b>портативных устройств</b>)
    при нажатии на <b>виртуальную клавиатуру</b> микрокомпьютера. На устройствах <b>без возможности вибрации</b> пункт не выполняет <b>никакой</b> функции.
</p><br>

<h4>Секция размера ОЗУ</h4>

<img src="p3.png" alt="p3"><br>
 
<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;Данная секция служит для <b>изменения размера</b> оперативной памяти виртуального микрокомпьютера. 
    Достаточно лишь выбрать <b>желаемый объем</b> ОЗУ с помощью <b>ползунка</b> (<b>2-32КБ</b>, объем всегда кратен <b>2КБ</b>) и нажать кнопку <b>"Set"</b>.
    Важно понимать, что в таком случае создастся <b>ЧИСТЫЙ</b> образ ОЗУ и вся предыдущая информация будет <b>БЕЗВОЗВРАТНО УТЕРЯНА</b>, поэтому
    необходимо <b>сохранить</b> текущий образ ОЗУ, если вам важны <b>программы</b> на нем. При <b>замене</b> ОЗУ микрокомпьютер <b>перезагружается</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Поскольку создается <b>чистый образ</b>, для <b>полноценной</b> работы микрокомпьютера требуется <b>инициализация памяти</b>.
    Это можно осуществить, нажав кнопку <b>"начальная установка"</b> на микрокомпьютере, запустив <b>самотест</b> (команда <b>TEST</b>) или <b>включив</b> в секции
    параметр <b>"Auto init"</b>, который при <b>изменении</b> размера ОЗУ <b>автоматически</b> вынуждает микрокомпьютер <b>произвести</b> инициализацию памяти.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Параметр <b>"32KB fix"</b> (доступен только если активен <b>"Auto init"</b> и ползунком выбрано <b>32КБ ОЗУ</b>) применяет <b>фикс</b> для правильной
    работы <b>заводской</b> прошивки с <b>32КБ ОЗУ</b>. Проблема в том, что столь <b>большой</b> объем памяти вызывает <b>неправильную</b> работу некоторых процедур в прошивке.
    Данный фикс позволяет <b>исправить</b> эту ситуацию, но уменьшает количество <b>свободной</b> BASIC памяти на <b>2 байта</b> (впрочем это <b>не критично</b>).
    Важно помнить, что в таком случае <b>не следует</b> пользоваться кнопкой <b>"начальная установка"</b>, либо запускать <b>самотест</b>,
    поскольку проведенная ими <b>инициализация</b> памяти <b>уберет фикс</b> и BASIC будет работать <b>некорректно</b>. В таком случае потребуется <b>вновь применить</b> этот фикс.
    Фикс <b>не требуется</b> применять для прошивки <b>"PL ROM"</b>, поскольку он уже <b>внедрен</b> в нее.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;После элементов управления нахдится <b>краткая памятка</b> о соотношении размеров ОЗУ с <b>реальными</b> вариантами <b>МК 85</b>
    (<b>2КБ у МК 85</b> и <b>6КБ у МК 85М</b>).
</p><br>

<h4>Секция загрузки и сохранения данных</h4>

<img src="p4.png" alt="p4"><br>
 
<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;В этой секции можно <b>загружать</b> или <b>сохранять</b> <b>ОЗУ</b> и <b>ПЗУ</b> виртуального микрокомпьютера.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;В полях <b>"RAM/ROM file"</b> отображаются <b>названия</b> загруженных файлов для ОЗУ и ПЗУ памяти.
    Надпись <b>"internal"</b> (внутренний) показывается, если используется встроенное (<b>заводское</b>) <b>ПЗУ</b> или если <b>ОЗУ образ</b> создан через секцию <b>размера ОЗУ</b>.
    Чтобы загрузить из <b>бинарного файла</b> ОЗУ или ПЗУ, достаточно <b>выбрать файл</b> (<b>кнопкой</b> или через <b>Drag'n'Drop</b>)
    и нажать кнопку <b>"Load RAM/ROM from file"</b>. При этом для <b>ОЗУ</b> файл должен быть <b>кратен 2КБ</b>, для <b>ПЗУ</b> - <b>8КБ</b>. Оба файла <b>не могут</b> превышать <b>32КБ</b>.
    При <b>несоблюдении</b> условий образы будут автоматически <b>расширены</b> до <b>кратных</b> соответствующим числам, либо <b>обрезаны</b> до <b>32КБ</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Чтобы сбросить <b>ROM образ</b> на <b>заводской</b>, достаточно нажать кнопку <b>"Reset ROM"</b>.
    <b>ОЗУ</b> можно сбросить, создав <b>новый образ</b> в секции <b>размера ОЗУ</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Вместо <b>заводского</b> ПЗУ можно загрузить <b>модифицированный</b> вариант <b>"PL ROM"</b>, созданный <b>Петром Пёнтком</b>
    (версия <b>27 BETA</b> от <b>17.11.2010</b>). Прошивка содержит в себе ряд <b>нововведений</b>, включая <b>новые</b> BASIC команды,
    <b>расширение функционала</b> уже существующих и поддержку <b>интерфейсов обмена данными</b>
    (хотя они требуют <b>аппаратной доработки</b>, поэтому в эмуляторе <b>не поддерживаются</b>). <b>Подробнее</b> о данной <b>прошивке</b> можно прочитать
    на <b>архивной</b> версии <a href="https://web.archive.org/web/20150828094341/http://mk85.republika.pl/rom.html" target="_blank"><b>сайта</b></a> (<b>польский</b> язык).
    <b>Загружается</b> прошивка кнопкой <b>"Load PL ROM v27B"</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Поскольку ОЗУ содержит <b>программы</b>, его можно <b>сохранить на диск</b> в виде <b>бинарного файла</b>.
    Делается это кнопкой <b>"Save RAM"</b>, при этом браузером загрузится файл <b>"mk85_ram.bin"</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Помимо этого можно получить <b>список</b> с содержимым <b>выделенных переменных</b> в памяти, нажав кнопку <b>"Get vars list"</b>
    (файл <b>"mk85_vars.txt"</b>). Для получения <b>всех</b> находящихся в ОЗУ <b>программ</b> в виде <b>текстового кода</b> есть кнопка <b>"Get programs"</b> (файл <b>"mk85_programs.txt"</b>).
    Загрузка в микрокомпьютер <b>текстового BASIC кода</b> осуществляется с помощью кнопки <b>"Load program from file"</b> (и расположенного рядом <b>поля выбора файла</b>).
    Поскольку эти кнопки работают с модулем <b>конвертера BASIC данных</b>, сведения о <b>работе</b> с ними выделены в отдельный <a href="conv_ru.html"><b>раздел</b></a>.    
</p><br>

<h4>Секция дополнительных функций</h4>

<img src="p5.png" alt="p5"><br>
 
<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;В секции находятся кнопки для открытия <b>утилит</b> и информационных <b>окон</b>, а также <b>отладочные</b> параметры.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Кнопка <b>"Keyboard layout"</b> открывает окно со <b>схемой раскладки</b> компьютерной клавиатуры, <b>адаптированной</b> для работы с виртуальным микрокомпьютером.
    Кнопка <b>"CHR96 code tool"</b> открывает панель <a href="chr96_ru.html"><b>утилиты CHR96</b></a>.
    Кнопка <b>"Debugger"</b> открывает, соответственно, панель <a href="debug_ru.html"><b>Дебаггера</b></a>.
    Кнопка <b>"Help"</b> открывает окно с данной <b>справкой</b>. А кнопка <b>"About"</b> - окно с <b>краткими сведениями</b> о программе и <b>списком изменений</b> (<b>Changelog</b>).<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Параметр <b>"Force turbo"</b> служит для <b>принудительного</b> включения <b>турбо режима</b>, поскольку <b>реальное устройство</b> при включении с турбо режимом
    на самом деле находится в нем <b>не постояно</b>, а выключает его при <b>выводе текста</b> на дисплей и <b>опросе</b> клавиатуры.
    Параметр <b>"Ignore frq. div."</b> принудительно отключает <b>делитель тактовой частоты</b> процессора (в <b>8</b> раз),
    также применяемый при <b>выводе текста</b> на дисплей и <b>опросе</b> клавиатуры.
    Параметр <b>"Disable soft poff"</b> отключает поддержку присутствующего в процессоре <b>программного выключателя</b>, позволяющего прошивке <b>выключать</b> устройство.
    В МК 85 программное выключение <b>происходит</b>, если прошивка <b>21 раз подряд</b> не смогла определить <b>нажатую</b> клавишу
    (обработчик не знает про клавишу <b>STOP</b> (потому как она вызывает <b>HALT</b> прерывание), поэтому можно <b>вызвать</b> такую ситуацию, если <b>21 раз</b> нажать клавишу <b>STOP</b>).<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Параметр <b>"Show debug messages"</b> разрешает показ <b>отладочных сообщений</b> в консоли (через функцию <b>console.log</b>).
</p><br>

<h4>Секция конфигурации скорости</h4>

<img src="p6.png" alt="p6"><br>
 
<p style="text-align: left;">
    &nbsp;&nbsp;&nbsp;&nbsp;Данная секция позволяет переключать <b>скоростные режимы</b> микрокомпьютера и изменять <b>скорость</b> этих режимов.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Первая строка (<b>"Speed"</b>) показывает <b>текущее состояние</b> процессора. Оно может быть <b>обычным </b>(<b>"Normal"</b>), либо <b>ускоренным</b> (<b>"Turbo"</b>).
    Также может быть включен <b>восьмикратный делитель</b> тактовой частоты (<b>"(8x slowed by freq. divider)"</b>) или <b>остановлен</b> тактовый
    генератор процессора ("<b>(clock stopped)</b>").<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Строки <b>"Standard"</b> и <b>"Turbo"</b> служат для изменения скорости <b>обычного</b> и <b>турбо</b> режима соответственно.
    По умолчанию для <b>обычного</b> режима установлена скорость <b>25000</b> операций в секунду и <b>120000</b> операций в секунду для <b>турбо</b>.
    Эти значения <b>близки</b> к реальным микрокомпьютерам (скорость в них <b>плавает</b> от устройства к устройству,
    что является следствием <b>неидеальности</b> (разброса) резисторов, применяемых в <b>тактовой RC цепи</b>, никаких <b>кварцевых резонаторов</b>), поэтому считаются <b>номинальными</b>.
    Кнопки <b>"Reset"</b> для каждого режима всегда будет устанавливать его <b>номинальное</b> значение. Для изменения (в диапазоне от <b>100</b> до <b>1000000</b> операций в секунду)
    достаточно ввести в <b>поле ввода</b> нужное значение и нажать <b>"Set"</b>.<br>
    &nbsp;&nbsp;&nbsp;&nbsp;Кнопка <b>"Change speed mode"</b> позволяет произвести смену режима <b>на горячую</b> (<b>не перезагружая</b> эмулятор).
    Рекомендуется менять режим только когда у устройства <b>остановлен тактовый генератор</b>.
    Если произвести смену при <b>опросе клавиатуры</b> или <b>выводе текста</b>, режим может <b>не переключиться</b>.
    Кнопка <b>"Restart in turbo mode"</b> перезагружает эмулятор <b>с включением</b> турбо режима.
    Аналогичного эффекта можно добиться, включив эмулятор с зажатой клавишей <b>+</b> или <b>М</b> (с помощью <b>клавиатуры с мышью</b> или <b>сенсорного экрана</b>).
</p>

<hr>
<h3 style="margin-top: 5px;margin-bottom: 5px;">Меню</h3>
<a class="menulink" href="help_ru.html">Главная страница</a>
<a class="menulink" href="interface_ru.html">Интерфейс эмулятора</a><br>
<span class="menulink">Работа с панелью опций</span>
<a class="menulink" href="debug_ru.html">Работа с Дебаггером</a>
<a class="menulink" href="chr96_ru.html">Работа с утилитой CHR96</a><br>
<a class="menulink" href="conv_ru.html">Работа с конвертерами BASIC данных</a><br>
<a class="menulink" href="faq_ru.html">Часто задаваемые вопросы (FAQ)</a>
<hr>

</body>
</html> 
